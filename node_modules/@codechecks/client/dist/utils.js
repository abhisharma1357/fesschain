"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = require("path");
function runOrCatchError(fn) {
    try {
        return fn();
    }
    catch (_a) {
        return undefined;
    }
}
exports.runOrCatchError = runOrCatchError;
function getRequiredEnv(name) {
    const value = process.env[name];
    if (value === undefined) {
        throw new Error(`Required env var ${name} missing`);
    }
    return value;
}
exports.getRequiredEnv = getRequiredEnv;
function normalizePath(absoluteOrRelativePath) {
    return path_1.resolve(absoluteOrRelativePath);
}
exports.normalizePath = normalizePath;
function maskSecrets(output, env) {
    const secret = env["CC_SECRET"];
    if (!secret) {
        return output;
    }
    return output.split(secret).join("###");
}
exports.maskSecrets = maskSecrets;
function ensureAbsolutePath(path) {
    if (!path_1.isAbsolute(path)) {
        throw new Error(`${path} has to be an absolute path!`);
    }
}
exports.ensureAbsolutePath = ensureAbsolutePath;
//# sourceMappingURL=utils.js.map