"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Circle_1 = require("./Circle");
const Travis_1 = require("./Travis");
const Local_1 = require("./Local");
const providers = [Circle_1.Circle, Travis_1.Travis, Local_1.LocalProvider];
// @todo refactor passing CLI options
function findProvider(env, localProject) {
    const providerInstances = providers.map(Provider => new Provider(env, localProject));
    const currentlyRunningProviders = providerInstances.filter(p => p.isCurrentlyRunning());
    if (currentlyRunningProviders.length === 0) {
        throw new Error("Could not find running CI.");
    }
    if (currentlyRunningProviders.length > 1) {
        throw new Error("Found more than 1 running CI o_O");
    }
    return currentlyRunningProviders[0];
}
exports.findProvider = findProvider;
//# sourceMappingURL=index.js.map